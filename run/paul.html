<script type="module">
	import { program, data } from './dummy-program.js'
	import { fetchUnspentOutputs } from '../libs/esplora.js'
	import { createPaulClient } from './bitvm-client.js'

	console.log('Trying to fetch an output...')
    const fundingAddress = 'tb1p9evrt83ma6e2jjc9ajagl2h0kqtz5y05nutg2xt2tn9xjcm29t0slwpyc9'
    const outpoint = (await fetchUnspentOutputs( fundingAddress )).filter(utxo => utxo.value == 1_000_000)[0]
    if(!outpoint) 
    	throw `You have to charge the contract with 1'000'000 sats! \n ${fundingAddress}`

	const client = await createPaulClient(outpoint, program, data)

	client.listen()
</script>

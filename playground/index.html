<script type="module">
    import { createActor } from '../transactions/utils.js'
    import { 
        createChallengeResponseChain, 
        presignChallengeResponseChain, 
        executeReveal1bit, 
        executeReveal160bit,
    } from '../transactions/reveal-challenge.js'
   

    const paul = createActor('d898098e09898a0980989b980809809809f09809884324874302975287524398')
    const vicky = createActor('a9bd8b8ade888ed12301b21318a3a73429232343587049870132987481723497')
    
    const funding_outpoint = {
        txid : '8c695e10b053e03c5aa1ac9c03bab7d075e6cded81c1d6e5bdda62d3211d6764',
        vout : 0
    }

    const { tx_chain, outpoint } = createChallengeResponseChain(vicky, paul, funding_outpoint, 5)
    
    // const tx_merkle = createMerkleChallenge(outpoint, paul, vicky)

    console.log('Address to fund: ', tx_chain[0].address)
    console.log('Amount: ', tx_chain[0].tx.vin[0].prevout.value)
    presignChallengeResponseChain(vicky, paul, tx_chain)
    
    await executeReveal1bit  ( vicky, tx_chain, 0, 1)
    await executeReveal160bit( paul,  tx_chain, 1, 'deadbeefdeadbeefdeadbeefdeadbeefdeadbeef')
    await executeReveal1bit  ( vicky, tx_chain, 2, 0)
    await executeReveal160bit( paul,  tx_chain, 3, 'beefdeadbeefdeadbeefdeadbeefdeadbeefdead')
    await executeReveal1bit  ( vicky, tx_chain, 4, 0)
    await executeReveal160bit( paul,  tx_chain, 5, 'beefdeadbeefdeadbeefdeadbeefdeadbeefdead')
    await executeReveal1bit  ( vicky, tx_chain, 6, 0)
    await executeReveal160bit( paul,  tx_chain, 7, 'beefdeadbeefdeadbeefdeadbeefdeadbeefdead')
    await executeReveal1bit  ( vicky, tx_chain, 8, 0)
    await executeReveal160bit( paul,  tx_chain, 9, 'beefdeadbeefdeadbeefdeadbeefdeadbeefdead')
    // Could go on with another 4 txs
</script>